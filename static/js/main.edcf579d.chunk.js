(this.webpackJsonpcalcalendarder=this.webpackJsonpcalcalendarder||[]).push([[0],{21:function(e,t,a){e.exports=a(46)},26:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),s=a.n(o),c=(a(26),a(2)),i=a(8),l=r.a.createContext();var u=a(11),m=a(1),f=a.n(m),d={timeLength:1,dayStartHour:7,startDate:(new Date).setHours(10),endDate:(new Date).setHours(11),title:"",description:"",color:"gray"};function D(e,t){var a=(t.clientY-e.current.offsetTop-(d.dayStartHour-1))/60+6;return{hours:a>7?Math.floor(a):0,minutes:a>7?Math.floor(60*(a-Math.floor(a))):0}}var k=["#2C3D4F","#91A79E","#F1E5C8","#EDB19F","#C87660","#D1AAA7","#C6A7D1","#A7D1C1","#BCD1A7","#615855","#555B61","#5FC6C7","#CEA296","#B87A76","#C75F7A","#C7B65F","#7682B8","#977E9E","#7E859E","#A0CE96","#4B4F2C","#703957","#472C4F","#2C334F","#A9A875","#b81639","#b87216","#dad046","gray","white"],g={color:"#f1e5c8",backgroundColor:"#4f6f8e"},b="#91A79E",p=65,y=6e4;function v(e){var t=e.taskProps,a=void 0===t?function(){var e=Object.assign({},d);return e.key=(new Date).getTime(),e}():t,n=e.onTaskClick,o=e.onDragStartHandler,s=e.sizeDragStartHandler,c=e.sizeDragEndHandler,i=e.sizeDragHandler,l=new Date(a.startDate),u=new Date(a.endDate),m=""===a.startDate?"no startDate":"".concat(l.getHours(),":").concat(l.getMinutes().toString().padStart(2,"0")),f=""===a.endDate?"no endDate":"".concat(u.getHours(),":").concat(u.getMinutes().toString().padStart(2,"0")),D=""===a.startDate?0:60*(l.getHours()-6)+l.getMinutes()+"px",k=""===a.endDate?"60px":(60*(u.getHours()-6)+u.getMinutes()-(60*(l.getHours()-6)+l.getMinutes())).toString()+"px";return r.a.createElement("div",{className:"task",style:{height:k,top:D},onClick:function(e){e.stopPropagation(),n()},onDragStart:function(e){return o(e,a)},draggable:"true"},r.a.createElement("p",{className:"task-title",style:{color:a.color,borderLeftColor:a.color}},a.title),r.a.createElement("p",{className:"task-time",style:{color:a.color,borderLeftColor:a.color}},"".concat(m," (to ").concat(f,")")),r.a.createElement("p",{className:"task-description",style:Number(k.replace("px",""))<45?{opacity:"0%"}:{}},a.description),r.a.createElement("div",{className:"task-size-handle",style:{borderColor:a.color},draggable:"true",onDragStart:function(e){return s(e,a.key)},onDrag:function(e){return i(e,a.key)},onDragEnd:function(e){return c(e,a.key)}}))}v.prototypes={taskProps:f.a.object,onTaskClick:f.a.func,onDragStartHandler:f.a.func};var E=v;var O=function(e){var t=e.setTaskColor,a=e.toggleColorPicker;return r.a.createElement("div",{className:"color-picker"},k.map((function(e){return r.a.createElement("div",{key:e,className:"color-select-btn",style:{backgroundColor:e},onClick:function(){return t(e),void a()}})})))};function j(e){var t=e.setWeekDefocus,a=e.isNew,o=e.initialTask,s=e.setShowTaskForm,i=e.removeTaskWithKey,l=e.submitHandler,u=Object(n.useState)(o.startDate),m=Object(c.a)(u,2),f=m[0],d=m[1],D=Object(n.useState)(o.endDate),k=Object(c.a)(D,1)[0],g=Object(n.useState)(o.title),p=Object(c.a)(g,2),y=p[0],v=p[1],E=Object(n.useState)(o.description),j=Object(c.a)(E,2),C=j[0],S=j[1],T=Object(n.useState)(a?b:o.color),h=Object(c.a)(T,2),w=h[0],N=h[1],H=Object(n.useState)(!1),M=Object(c.a)(H,2),x=M[0],F=M[1],A=Object(n.useState)("08:00"),W=Object(c.a)(A,2),B=W[0],L=W[1],z=Object(n.useState)("10:00"),I=Object(c.a)(z,2),K=I[0],P=I[1],Y=new Date(f),R=Object(n.useRef)();function U(e,t){t(e.target.value)}function J(){F(!x)}return console.log("FORM: ",o),Object(n.useEffect)((function(){function e(e,t){e(t.getHours().toString().padStart(2,0)+":"+t.getMinutes().toString().padStart(2,0))}R.current.focus(),e(L,Y),e(P,k)}),[]),r.a.createElement("form",{className:"task-form",style:{borderColor:w}},r.a.createElement("textarea",{type:"text-area",id:"task-title",name:"title",placeholder:"What's your task?",className:"task-form-title",style:{borderColor:w},value:y,onChange:function(e){U(e,v)},ref:R}),r.a.createElement("textarea",{type:"text-area",id:"task-discription",name:"discription",placeholder:"Task discription?",className:"task-form-discription",style:{borderColor:w},value:C,onChange:function(e){U(e,S)}}),r.a.createElement("label",{type:"label",htmlFor:"task-time",className:"task-form-time-lable",style:{color:w}},"Starts at:"),r.a.createElement("input",{type:"time",id:"task-time",name:"task-time",className:"task-form-time",style:{borderColor:w},min:"07:00",max:"21:00",autoComplete:"true",value:B,onChange:function(e){U(e,d)}}),r.a.createElement("label",{type:"label",htmlFor:"task-time-end",className:"task-form-end-lable",style:{color:w}},"Ends at:"),r.a.createElement("input",{type:"time",id:"task-time-end",name:"task-time-end",className:"task-form-time-end",style:{borderColor:w},min:"07:00",max:"21:00",value:K,readOnly:!0,onChange:function(e){}}),r.a.createElement("div",{onClick:J,className:"task-form-color",name:"form-color",style:{backgroundColor:w}},"C"),r.a.createElement("button",{type:"submit",className:"task-form-submit",onClick:function(e){return l(e,{key:(new Date).getTime(),startDate:f,endDate:k,title:y,description:C,color:w},o)}},"\u2714"),r.a.createElement("button",{type:"button",className:"task-form-cancel",onClick:function(){a&&i(o.key),t(!1),s(!1)}},"\u2716"),!0===x?r.a.createElement(O,{setTaskColor:N,toggleColorPicker:J}):r.a.createElement("div",null))}j.prototypes={setWeekDefocus:f.a.func,isNew:f.a.bool,initialTask:f.a.object,setShowTaskForm:f.a.func,removeTaskWithKey:f.a.func};var C,S=j,T=new Date,h=function(e){return[e.getDate(),e.getMonth(),e.getFullYear()].join(" ")},w=function(e,t){return h(e)===h(t)},N=Object.freeze(["SUN","MON","TUE","WED","THU","FRI","SAT"]),H=!1,M=0,x=0;function F(e){var t=e.dayDate,a=e.setWeekDefocus,o=e.setWeekLog,s=t.getDate().toString(),i=N[t.getDay()],m=t.getTime(),f=new Date(t).setHours(23,59,59,999),k=Object(n.useState)(!1),b=Object(c.a)(k,2),v=b[0],O=b[1],j=Object(n.useState)(new Date(t)),h=Object(c.a)(j,2),F=h[0],A=h[1],W=Object(n.useState)([]),B=Object(c.a)(W,2),L=B[0],z=B[1],I=Object(n.useState)({}),K=Object(c.a)(I,2),P=K[0],Y=K[1],R=Object(n.useState)(!0),U=Object(c.a)(R,2),J=U[0],q=U[1],G=Object(n.useState)(!1),Q=Object(c.a)(G,2),V=Q[0],X=Q[1],Z=Object(n.useState)({x:0,y:50}),$=Object(c.a)(Z,2),_=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useContext)(l),se=oe.taskData,ce=oe.setNewTask,ie=oe.currentDate,le=oe.removeTaskWithKey,ue=oe.setCurrentDate,me=oe.replaceTasks,fe=oe.taskLog,de=Object(n.useRef)(),De=w(t,ie)?g:{};function ke(e,t){if(!0!==H){var a=L.findIndex((function(e){return e.key===t.key}));L.splice(a,1),e.dataTransfer.setData("taskKey",t.key)}}function ge(e,t){H=!0,M=e.clientY,C=se[se.findIndex((function(e){return e.key===t}))],x=C.endDate.getTime()}function be(e,t){var a=x+(e.clientY-M)*y;C.endDate.getTime(),C.startDate.getTime();ne||(console.log("BLA"),C.endDate.setTime(a),re(!0))}function pe(e,t){C.endDate.setTime(x+6e4*(e.clientY-M)),H=!1}Object(n.useEffect)((function(){ue(new Date)}),[]),Object(n.useEffect)((function(){var e,t;z((e=m,t=f,se.filter((function(a){return a.startDate>=e&&a.startDate<t}))))}),[fe,se.length]),Object(n.useEffect)((function(){setTimeout((function(){re(!1)}),100)}),[ne]);var ye=r.a.createElement("div",{className:"dayTitle",style:De},r.a.createElement("h4",null,s),r.a.createElement("p",null,"("+i+")"));return r.a.createElement("div",{className:"day-container"},ye,r.a.createElement("div",{className:"day",ref:de,onClick:function(e){q(!0);var n=new Date(t),r=new Date(t);n.setHours(T.getHours()),n.setMinutes(T.getMinutes()),r.setHours(T.getHours()+d.timeLength),r.setMinutes(n.getMinutes());var o={key:(new Date).getTime().toString(),startDate:n,endDate:r,title:"",description:""};Y(o),O(!0),a(!0)},onMouseMove:function(e){var t=D(de,e);T.setHours(t.hours),T.setMinutes(t.minutes),ee({y:e.clientY-p}),A(T)},onMouseOver:function(){X(!0)},onMouseLeave:function(){X(!1)},onDragOver:function(e){e.preventDefault()},onDrop:function(e){if(!0!==H){e.preventDefault();var a=e.dataTransfer.getData("taskKey"),n=se.findIndex((function(e){return e.key.toString()===a})),r=se[n],s=Object(u.a)({},r),c=s.endDate.getHours()-s.startDate.getHours(),i=s.endDate.getMinutes()-s.startDate.getMinutes();s.startDate.setTime(t.getTime()),s.startDate.setHours(D(de,e).hours),s.startDate.setMinutes(D(de,e).minutes),s.endDate.setTime(t.getTime()),s.endDate.setHours(s.startDate.getHours()+c),s.endDate.setMinutes(s.startDate.getMinutes()+i),me(r.key,s),o((function(){return{task:r,date:new Date}}))}}},L.map((function(e){return r.a.createElement(E,{key:e.key,taskProps:e,onTaskClick:function(){return t=e,q(!1),Y(t),O(!0),void a(!0);var t},onDragStartHandler:ke,sizeDragStartHandler:ge,sizeDragHandler:be,sizeDragEndHandler:pe})})),V&&r.a.createElement("div",{className:"time-tool-tip",style:{top:_.y}},"".concat(F.getHours(),":").concat(F.getMinutes().toString().padStart(2,"0")))),v&&r.a.createElement(S,{initialTask:P,submitHandler:function(e,t,n){e.preventDefault(),ce(Object(u.a)({},t)),a(!1),O(!1)},isNew:J,setWeekDefocus:a,setShowTaskForm:O,removeTaskWithKey:le}))}F.prototypes={setWeekDefocus:f.a.func,dayDate:f.a.object};var A=F;var W=function(){console.log("WEEK INIT");var e,t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],s=a[1],i=Object(n.useState)([]),u=Object(c.a)(i,2),m=(u[0],u[1]),f=Object(n.useContext)(l).focusDate,d=(e=f,new Date(e.setDate(e.getDate()-e.getDay()))),D=d.getDate(),k=new Array(7).fill(void 0).map((function(e,t){return new Date(new Date(d).setDate(D+t))}));return r.a.createElement("div",{className:"week"},o&&r.a.createElement("div",{className:"week-defocus"}),k.map((function(e){return r.a.createElement(A,{dayDate:e,key:e,setWeekDefocus:s,setWeekLog:m})})))},B=a(20),L=a.n(B);var z=function(){var e=Object(n.useContext)(l).setFocusDate;return r.a.createElement("div",{className:"side-bar"},r.a.createElement(L.a,{tileClassName:"side-cal-item",onChange:function(t){e(t)},calendarType:"Hebrew"}))};var I=function(){return r.a.createElement("button",{className:"menu-btn",onClick:function(){console.log("menuBtnClick!")}},"\u2630")};var K=function(){return r.a.createElement("header",{className:"nav-bar"},r.a.createElement(I,null),r.a.createElement("h1",null,"calcalendarder"))};a(44);var P=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(K,null),r.a.createElement(z,null),r.a.createElement(W,null))};a(45);s.a.render(r.a.createElement((function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],s=a[1],u=Object(n.useState)(new Date),m=Object(c.a)(u,2),f=m[0],d=m[1],D=Object(n.useState)(new Date("2020-01-08T06:00:00")),k=Object(c.a)(D,2),g=k[0],b=k[1],p=Object(n.useState)([]),y=Object(c.a)(p,2),v=y[0],E=y[1];function O(e){s((function(t){var a=Object(i.a)(t);return a.push(e),console.log("newTask",e),console.log("newData",a),a.sort((function(e,t){return e.startDate.getTime()<t.startDate.getTime()?-1:e.startDate.getTime()>t.startDate.getTime()?1:0})),a}))}return r.a.createElement(l.Provider,{value:{taskData:o,setTaskData:s,currentDate:f,setCurrentDate:d,setNewTask:O,focusDate:g,setFocusDate:b,replaceTasks:function(e,t){!function(e){console.log("remove task with key :"+e);var t=Object(i.a)(o),a=o.findIndex((function(t){return t.key===e}));a>-1?t.splice(a,1):console.log("no matching task key"),s(t),console.log("taskData is now :",t)}(e),O(t),E((function(e){return[].concat(Object(i.a)(e),[{date:new Date,taskKey:t.key}])}))},taskLog:v}},e.children)}),null,r.a.createElement(P,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.edcf579d.chunk.js.map